- content_for :head do
  = javascript_include_tag 'designer_center_requests/show'
  = javascript_include_tag 'designer_center_requests/products_list'
  = javascript_include_tag 'designer_center_requests/concept_board_uploader'
  - if @request.fulfillment_approved?
    = javascript_include_tag 'designer_center_requests/fulfillment_approved_edit'
  = render partial: 'shared/setup_uploadify'
  :javascript
    I18n = #{ translations_to_json('client_center') }
    MessagesI18n = #{ translations_to_json(['board_comments']) }

- content_for :designer_center_content do
  .container.animated.fadeInDown.bottom60
    - if @request.fulfillment_approved?
      = render partial: 'designer_center_requests/edit/final_upload',
          locals: { contest_request: @request, product_items: @request.product_items.includes(:image) }
    - else
      .row
        - if @request_view.current_phase_index.present?
          = render partial: 'clients/client_center/entries/phases',
          locals: { active_tab: @request_view.current_phase_index }
      .row.marg-top30.response{ data: { id: @request.id } }
        .col-md-8.disablePadding
          %p.thisIsAPreview= @request_view.header_text
        .col-md-4
        .col-md-8.disablePadding
          .initialImage
            = render partial: 'shared/moodboard', locals: { request: @request }
            .concept-board-upload-hint= t('designer_center.edit.update_concept_board')
            - if @request.editable?
              = link_to t('designer_center.edit.upload_new'),
                  designer_center_response_path(id: @request.id),
                  remote: true,
                  class: 'darkBorderBtn editMoodboardBtn'
          - if @request.fulfillment_editing?
            = form_for @request, url: designer_center_response_path(id: @request.id) do |f|
              .image-items
                .products-list
                  = render partial: 'designer_center_requests/edit/image_block',
                      locals: { editable: true,
                        title: t('designer_center.edit.products_list'),
                        subtitle: t('designer_center.product_items.product_list_title'),
                        image_list_name: :product_items,
                        contest_request: @request,
                        image_items: @product_items }
                .similar-styles
                  = render partial: 'designer_center_requests/edit/image_block',
                      locals: { editable: true,
                        title: t('designer_center.edit.similar_styles'),
                        subtitle: t('designer_center.product_items.similar_styles_title'),
                        image_list_name: :similar_styles,
                        contest_request: @request,
                        image_items: @similar_styles }
        .col-md-4.attribute{ data: {attribute: 'feedback', url: designer_center_response_path(@request.id) } }
          = render partial: 'designer_center_requests/show/notes', locals: { request: @request }
          - if @request.commenting_enabled?
            = render partial: 'designer_center_requests/edit/comments', locals: { request: @request,
                comments: @request.comments }
        = render partial: 'designer_center_requests/editing_footer_buttons'

= render partial: 'designer_center/layout'
